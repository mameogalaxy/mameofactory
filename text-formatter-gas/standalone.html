<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>ğŸƒ ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆè¨ä¼ã‚²ãƒ¼ãƒ </title>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.20.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5"></script>
<style>
body{margin:0;overflow:hidden;font-family:Arial,sans-serif}
#startScreen{position:fixed;inset:0;background:linear-gradient(135deg,#667eea,#764ba2);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow-y:auto;padding:20px}
#startScreen h1{color:#fff;font-size:3rem;margin:20px 0;text-shadow:3px 3px 8px rgba(0,0,0,0.3)}
#startBtn{font-size:2rem;padding:20px 60px;background:#ff4757;color:#fff;border:none;border-radius:15px;cursor:pointer;margin:20px;box-shadow:0 8px 20px rgba(0,0,0,0.3)}
table{width:100%;border-collapse:collapse;background:#fff;border-radius:15px;overflow:hidden}
th{padding:10px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
</style>
</head>
<body>
<div id="startScreen">
<h1>ğŸƒ ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆè¨ä¼</h1>
<button id="startBtn">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
<div style="background:#fff;border-radius:15px;padding:20px;max-width:800px;width:90%;margin-top:20px;box-shadow:0 8px 20px rgba(0,0,0,0.3)">
<h2 style="text-align:center;color:#667eea;margin:0 0 15px 0">ğŸ† TOP 10 ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h2>
<table>
<thead><tr><th>é †ä½</th><th>åå‰</th><th>ã‚¹ãƒ†ãƒ¼ã‚¸</th><th>å›æ•°</th></tr></thead>
<tbody id="rankingTable"><tr><td colspan="4" style="padding:20px;text-align:center">èª­ã¿è¾¼ã¿ä¸­...</td></tr></tbody>
</table>
</div>
</div>
<script>
const SHEET_ID='180zH4Ba5OTXMCN5abNQQsICWACn6IKTNQ0q8Wo8jmuc';
function loadRanking(){
const tbody=document.getElementById('rankingTable');
fetch('https://docs.google.com/spreadsheets/d/'+SHEET_ID+'/gviz/tq?tqx=out:json&sheet=ã‚¹ã‚³ã‚¢')
.then(r=>r.text()).then(text=>{
const json=JSON.parse(text.substr(47).slice(0,-2));
const rows=json.table.rows;
if(rows.length<=1){tbody.innerHTML='<tr><td colspan="4" style="padding:20px;text-align:center">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>';return;}
const scores=rows.slice(1).map(r=>({name:r.c[1]?r.c[1].v:'',stage:r.c[3]?r.c[3].v:0,squats:r.c[4]?r.c[4].v:0})).filter(s=>s.name);
scores.sort((a,b)=>b.stage-a.stage||b.squats-a.squats);
let html='';
scores.slice(0,10).forEach((item,i)=>{
const rank=i+1;
let color='#333';
if(rank===1)color='#FFD700';
else if(rank===2)color='#C0C0C0';
else if(rank===3)color='#CD7F32';
html+='<tr><td style="padding:10px;text-align:center;font-weight:bold;color:'+color+'">'+rank+'</td><td style="padding:10px;text-align:center">'+item.name+'</td><td style="padding:10px;text-align:center"><strong>'+item.stage+'</strong></td><td style="padding:10px;text-align:center">'+item.squats+'</td></tr>';
});
tbody.innerHTML=html;
}).catch(()=>tbody.innerHTML='<tr><td colspan="4" style="padding:20px;text-align:center">èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</td></tr>');
}
loadRanking();
</script>
</body>
</html>
